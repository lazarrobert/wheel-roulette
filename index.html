<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spin the Wheel</title>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; background: #f4f4f4; }
        canvas { margin-top: 20px; background: #fff; border-radius: 50%; }
        button { margin-top: 20px; padding: 10px 20px; font-size: 18px; cursor: pointer; background: #28a745; color: white; border: none; }
    </style>
</head>
<body>
    <h2>ðŸŽ¡ Spin the Wheel!</h2>
    <canvas id="wheelCanvas" width="300" height="300"></canvas>
    <br>
    <button onclick="spinWheel()">Spin Now</button>
    <p id="result"></p>

    <script>
        const canvas = document.getElementById("wheelCanvas");
        const ctx = canvas.getContext("2d");
        const sections = ["100 Coins", "50 Coins", "200 Coins", "Lose", "500 Coins", "Try Again"];
        let spinning = false;

        function drawWheel() {
            const slice = (2 * Math.PI) / sections.length;
            sections.forEach((text, i) => {
                ctx.beginPath();
                ctx.moveTo(150, 150);
                ctx.arc(150, 150, 150, slice * i, slice * (i + 1));
                ctx.fillStyle = i % 2 ? "#f39c12" : "#d35400";
                ctx.fill();
                ctx.stroke();
                
                // Set text properties
                ctx.fillStyle = "#fff";
                ctx.font = "12px Arial";
                ctx.textAlign = "center";
                ctx.textBaseline = "middle";

                // Calculate text position
                let angle = slice * (i + 0.5);
                let x = 150 + Math.cos(angle) * 100;
                let y = 150 + Math.sin(angle) * 100;

                ctx.save();
                ctx.translate(x, y);
                ctx.rotate(angle + Math.PI / 2);
                ctx.fillText(text, 0, 0);
                ctx.restore();
            });
        }

        function spinWheel() {
            if (spinning) return;
            spinning = true;
            const randomIndex = Math.floor(Math.random() * sections.length);
            setTimeout(() => {
                spinning = false;
                document.getElementById("result").innerText = "ðŸŽ‰ You won: " + sections[randomIndex];
                
                // Send result to Telegram bot
                if (window.Telegram && Telegram.WebApp) {
                    Telegram.WebApp.sendData(sections[randomIndex]);
                }
            }, 2000);
        }

        drawWheel();
    </script>
</body>
</html>

